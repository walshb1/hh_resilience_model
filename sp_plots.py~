import matplotlib.pyplot as plt
import pandas as pd
import os, glob

import seaborn as sns
sns.set_style('darkgrid')

myCountry = 'SL'
to_usd = 1./153

def get_sp_costs(myCountry):
    sp_pols, sp_files = [], {}

    dir = '../output_country/'+myCountry+'/sp_costs'
    
    for f in glob.glob(dir+'*'):
        
        sp_pol = f.replace(dir+'_','').replace('.csv','')
        sp_pols.append(sp_pol)

        sp_files[sp_pol] = pd.read_csv(f,index_col=['district','hazard','rp'])

    return sp_pols, sp_files

sp_pols, sp_files = get_sp_costs(myCountry)

for _sp in sp_pols:

    plt.plot(sp_files[_sp].sum(level='rp').index,sp_files[_sp]['event_cost'].sum(level='rp')*to_usd/1.E6,label=_sp)

plt.xscale('log')
plt.show()
